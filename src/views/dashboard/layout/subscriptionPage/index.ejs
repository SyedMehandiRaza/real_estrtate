<!DOCTYPE html>
<html>
<head>
  <title>Pricing</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>

<div class="pricing-wrapper">
  <div class="section-title">
    <span>Real Estate</span>
    <h1>
      Select the plan that best fits
      <br />
      <span class="highlight">your business needs.</span>
    </h1>
  </div>

  <div class="cards">

    <div class="card">
      <div class="card-header">
        <span class="plan-name">Basic</span>
      </div>
      <div class="price-row">
        <span class="price">â‚¹49</span>
        <span>/month</span>
      </div>
      <ul>
        <li>6 Property listing</li>
        <li>CRM</li>
        <li>Marketing</li>
        <li>Facility Management</li>
      </ul>
      <button onclick="payNow(1)">Select</button>
    </div>

    <div class="card featured">
      <div class="card-header">
        <span class="plan-name">Premium</span>
      </div>
      <div class="price-row">
        <span class="price">â‚¹99</span>
        <span>/month</span>
      </div>
      <ul>
        <li>20 Property listing</li>
        <li>CRM</li>
        <li>Marketing</li>
        <li>Facility Management</li>
      </ul>
      <button onclick="payNow(2)">Select</button>
    </div>

    <div class="card">
      <div class="card-header">
        <span class="plan-name">Pro</span>
      </div>
      <div class="price-row">
        <span class="price">â‚¹149</span>
        <span>/month</span>
      </div>
      <ul>
        <li>50 Property listing</li>
        <li>CRM</li>
        <li>Marketing</li>
        <li>Facility Management</li>
      </ul>
      <button onclick="payNow(3)">Select</button>
    </div>

  </div>
</div>

<script>
async function payNow(planId) {
  try {
    const res = await fetch("/create", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ planId })
    });

    const data = await res.json();

    const options = {
      key: data.key,  
      amount: data.order.amount,
      currency: "INR",
      name: "Real Estate App",
      description: "Subscription Plan",
      order_id: data.order.id,

      handler: async function (response) {
        const verifyRes = await fetch("/payment/verify", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            razorpayOrderId: response.razorpay_order_id,
            razorpayPaymentId: response.razorpay_payment_id,
            razorpaySignature: response.razorpay_signature,
            planId: planId,
            amount: data.order.amount
          })
        });

        const verifyData = await verifyRes.json();

        alert("Payment successful! Plan activated.");
        window.location.href = "/dashboard";
      },

      theme: {
        color: "#7f5af0"
      }
    };

    const rzp = new Razorpay(options);
    rzp.open();

  } catch (err) {
    console.error(err);
    alert("Payment failed");
  }
}
</script>


</body>
</html>




<!-- 
  <div class="pricing-wrapper">
    <div class="section-title">
      <span>Real Estate</span>
      <h1>
        Select the plan that best fits
        <br />
        <span class="highlight">your business needs.</span>
      </h1>
    </div>

    <div class="billing-toggle">
      <div class="toggle-inner">
        <button class="toggle-btn active">Monthly</button>
        <button class="toggle-btn">Annual</button>
      </div>
    </div>

    <div class="cards">
      <div class="card">
        <div class="card-header">
          <div class="plan-name-row">
            <span class="plan-name">Basic</span>
          </div>
          <p class="plan-subtitle">
            Empower your property business with flexible tools designed to
            manage every stage of growth.
          </p>
        </div>
        <div class="price-row">
          <span class="price">$49</span>
          <span class="per">/month</span>
        </div>
        <ul class="features">
          <li>
            <span class="dot pink"></span>
            6 Property listing
          </li>
          <li>
            <span class="dot.blue dot"></span>
            CRM
          </li>
          <li>
            <span class="dot red"></span>
            Marketing
          </li>
          <li>
            <span class="dot green"></span>
            Facility Management
          </li>
        </ul>
        <button>Select</button>
      </div>

      <div class="card featured">
        <div class="card-header">
          <div class="plan-name-row">
            <span class="plan-name">Premium</span>
            <span class="plan-badge">ðŸ’Ž</span>
          </div>
          <p class="plan-subtitle">
            Empower your property business with flexible tools designed to
            manage every stage of growth.
          </p>
        </div>
        <div class="price-row">
          <span class="price">$99</span>
          <span class="per">/month</span>
        </div>
        <ul class="features">
          <li>
            <span class="dot pink"></span>
            20 Property listing
          </li>
          <li>
            <span class="dot blue"></span>
            CRM
          </li>
          <li>
            <span class="dot red"></span>
            Marketing
          </li>
          <li>
            <span class="dot green"></span>
            Facility Management
          </li>
        </ul>
        <button>Select</button>
      </div>

      <div class="card">
        <div class="card-header">
          <div class="plan-name-row">
            <span class="plan-name">Pro</span>
            <span class="plan-badge">ðŸ‘‘</span>
          </div>
          <p class="plan-subtitle">
            Empower your property business with flexible tools designed to
            manage every stage of growth.
          </p>
        </div>
        <div class="price-row">
          <span class="price">$149</span>
          <span class="per">/month</span>
        </div>
        <ul class="features">
          <li>
            <span class="dot pink"></span>
            50 Property listing
          </li>
          <li>
            <span class="dot blue"></span>
            CRM
          </li>
          <li>
            <span class="dot red"></span>
            Marketing
          </li>
          <li>
            <span class="dot green"></span>
            Facility Management
          </li>
        </ul>
        <button>Select</button>
      </div>
    </div>
  </div> -->